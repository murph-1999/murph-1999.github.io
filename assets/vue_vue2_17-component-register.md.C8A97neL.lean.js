import{_ as s,o as i,c as a,a8 as n}from"./chunks/framework.Q0X2mdF-.js";const y=JSON.parse('{"title":"ç»„ä»¶æ³¨å†Œ","description":"","frontmatter":{},"headers":[],"relativePath":"vue/vue2/17-component-register.md","filePath":"vue/vue2/17-component-register.md","lastUpdated":null}'),h={name:"vue/vue2/17-component-register.md"},p=n(`<h1 id="ç»„ä»¶æ³¨å†Œ" tabindex="-1">ç»„ä»¶æ³¨å†Œ <a class="header-anchor" href="#ç»„ä»¶æ³¨å†Œ" aria-label="Permalink to &quot;ç»„ä»¶æ³¨å†Œ&quot;">â€‹</a></h1><p>ä¸€ä¸ªvueç»„ä»¶åœ¨ä½¿ç”¨å‰éœ€è¦å…ˆè¢«æ³¨å†Œï¼Œè¿™æ ·vueæ‰èƒ½åœ¨æ¸²æŸ“æ¨¡æ¿æ—¶æ‰¾åˆ°å…¶å¯¹åº”çš„å®ç°ã€‚ç»„ä»¶æ³¨å†Œçš„ç±»å‹æœ‰å…¨å±€æ³¨å†Œå’Œå±€éƒ¨æ³¨å†Œã€‚</p><h2 id="å…¨å±€æ³¨å†Œ" tabindex="-1">å…¨å±€æ³¨å†Œ <a class="header-anchor" href="#å…¨å±€æ³¨å†Œ" aria-label="Permalink to &quot;å…¨å±€æ³¨å†Œ&quot;">â€‹</a></h2><h3 id="ä½¿ç”¨" tabindex="-1">ä½¿ç”¨ <a class="header-anchor" href="#ä½¿ç”¨" aria-label="Permalink to &quot;ä½¿ç”¨&quot;">â€‹</a></h3><p>è¦æ³¨å†Œä¸€ä¸ªå…¨å±€ç»„ä»¶ï¼Œå¯ä»¥ä½¿ç”¨ Vue.component(tagName, options)ã€‚</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æ³¨å†Œç»„ä»¶ï¼Œä¼ å…¥ä¸€ä¸ªæ‰©å±•è¿‡çš„æ„é€ å™¨, Vue.extendç”Ÿæˆä¸€ä¸ªæ„é€ å‡½æ•°</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Vue.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">component</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;my-component&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, Vue.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">extend</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* ... */</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }))</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æ³¨å†Œç»„ä»¶ï¼Œä¼ å…¥ä¸€ä¸ªé€‰é¡¹å¯¹è±¡ (è‡ªåŠ¨è°ƒç”¨ Vue.extend)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Vue.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">component</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;my-component&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, { </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* ... */</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> })</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// è·å–æ³¨å†Œçš„ç»„ä»¶ (å§‹ç»ˆè¿”å›æ„é€ å™¨)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> MyComponent </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Vue.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">component</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;my-component&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>å…¨å±€æ³¨å†Œè™½ç„¶å¾ˆæ–¹ä¾¿ï¼Œä½†æœ‰ä»¥ä¸‹å‡ ä¸ªé—®é¢˜ï¼š</p><blockquote><ol><li>å…¨å±€æ³¨å†Œï¼Œä½†å¹¶æ²¡æœ‰è¢«ä½¿ç”¨çš„ç»„ä»¶æ— æ³•åœ¨ç”Ÿäº§æ‰“åŒ…æ—¶è¢«è‡ªåŠ¨ç§»é™¤ (ä¹Ÿå«â€œtree-shakingâ€)ã€‚å¦‚æœä½ å…¨å±€æ³¨å†Œäº†ä¸€ä¸ªç»„ä»¶ï¼Œå³ä½¿å®ƒå¹¶æ²¡æœ‰è¢«å®é™…ä½¿ç”¨ï¼Œå®ƒä»ç„¶ä¼šå‡ºç°åœ¨æ‰“åŒ…åçš„ JS æ–‡ä»¶ä¸­ã€‚</li><li>å…¨å±€æ³¨å†Œåœ¨å¤§å‹é¡¹ç›®ä¸­ä½¿é¡¹ç›®çš„ä¾èµ–å…³ç³»å˜å¾—ä¸é‚£ä¹ˆæ˜ç¡®ã€‚åœ¨çˆ¶ç»„ä»¶ä¸­ä½¿ç”¨å­ç»„ä»¶æ—¶ï¼Œä¸å¤ªå®¹æ˜“å®šä½å­ç»„ä»¶çš„å®ç°ã€‚å’Œä½¿ç”¨è¿‡å¤šçš„å…¨å±€å˜é‡ä¸€æ ·ï¼Œè¿™å¯èƒ½ä¼šå½±å“åº”ç”¨é•¿æœŸçš„å¯ç»´æŠ¤æ€§ã€‚</li><li>ç›¸æ¯”ä¹‹ä¸‹ï¼Œå±€éƒ¨æ³¨å†Œçš„ç»„ä»¶éœ€è¦åœ¨ä½¿ç”¨å®ƒçš„çˆ¶ç»„ä»¶ä¸­æ˜¾å¼å¯¼å…¥ï¼Œå¹¶ä¸”åªèƒ½åœ¨è¯¥çˆ¶ç»„ä»¶ä¸­ä½¿ç”¨ã€‚å®ƒçš„ä¼˜ç‚¹æ˜¯ä½¿ç»„ä»¶ä¹‹é—´çš„ä¾èµ–å…³ç³»æ›´åŠ æ˜ç¡®ï¼Œå¹¶ä¸”å¯¹ tree-shaking æ›´åŠ å‹å¥½ã€‚</li></ol></blockquote><h4 id="æºç åˆ†æ" tabindex="-1">æºç åˆ†æ <a class="header-anchor" href="#æºç åˆ†æ" aria-label="Permalink to &quot;æºç åˆ†æ&quot;">â€‹</a></h4><h5 id="å…¥å£" tabindex="-1">å…¥å£ <a class="header-anchor" href="#å…¥å£" aria-label="Permalink to &quot;å…¥å£&quot;">â€‹</a></h5><p>é¦–å…ˆæ˜¯åœ¨<code>initGlobalAPI</code> é™æ€æ–¹æ³•ä¸­è°ƒç”¨<code>initAssetRegisters()</code>æ–¹æ³•ï¼Œè¿™ä¸ªåœ¨åˆå§‹åŒ–éƒ¨åˆ†è¯´æ˜è¿‡ã€‚</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* æ³¨å†ŒVue.directive(),Vue.component(), Vue.filter()*/</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">initAssetRegisters</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Vueï¼‰</span></span></code></pre></div><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> initAssetRegisters</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">Vue</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> GlobalAPI</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   * Create asset registration methods.</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   */</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // definitionæ˜¯ç”¨æˆ·ä¼ å…¥çš„</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  ASSET_TYPES</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">forEach</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">type</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Vue[type] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">      id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      definition</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Function</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Object</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    )</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Function</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Object</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> void</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">definition) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // ç›´æ¥è¿”å›å·²æ³¨å†Œçš„å…¨å±€ç»„ä»¶/æŒ‡ä»¤/è¿‡æ»¤å™¨ï¼Œåœ¨global-api.jsä¸­è®¾ç½®äº†å­˜å‚¨</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.options[type </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;s&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">][id]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        /* istanbul ignore if */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (process.env.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">NODE_ENV</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> !==</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;production&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> type </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;component&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">          validateComponentName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(id)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (type </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;component&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &amp;&amp;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> isPlainObject</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(definition)) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">          // ç¡®ä¿æœ‰nameå±æ€§</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          definition.name </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> definition.name </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">||</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> id</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">          // æŠŠç»„ä»¶é…ç½®è½¬æ¢æˆç»„ä»¶çš„æ„é€ å‡½æ•°</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">          // this.options._base Vueæ„é€ å‡½æ•°</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">          // å› ä¸ºæ˜¯é™æ€æ–¹æ³•ï¼Œæ‰€ä»¥this.options._base.extendç­‰ä»·äºè°ƒç”¨ Vue.extend(definition)ï¼Œå¹¶æŠŠè¯¥è¿”å›å€¼æ”¾å…¥ Vue.options[&#39;components&#39;] å¯¹è±¡ä¸­ã€‚</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          definition </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.options._base.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">extend</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(definition)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (type </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;directive&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &amp;&amp;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> typeof</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> definition </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;function&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          definition </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { bind: definition, update: definition }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // å…¨å±€æ³¨å†Œï¼Œå­˜å‚¨èµ„æºå¹¶èµ‹å€¼</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.options[type </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;s&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">][id] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> definition</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> definition</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p><code>ASSET_TYPES</code> å®šä¹‰åœ¨ <code>src/shared/constants.js</code> ä¸­ï¼š</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> ASSET_TYPES</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &#39;component&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &#39;directive&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &#39;filter&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span></code></pre></div><p>éå†è¿™ä¸‰ç§ç±»å‹ï¼Œ<code>Vue</code>åˆå§‹åŒ–ä¸‰ä¸ªå…¨å±€å‡½æ•°ã€‚è¿™é‡Œæ¥åˆ†æ<code>Vue.component()</code>å‡½æ•°çš„åˆ›å»ºã€‚</p><p>è¿™æ®µä»£ç éœ€è¦å…³æ³¨çš„éƒ¨åˆ†æ˜¯è¿™é‡Œï¼š</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">definition </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.options._base.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">extend</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(definition)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.options[type </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;s&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">][id] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> definition</span></span></code></pre></div><p><code>extend</code>çš„ä½œç”¨å°±æ˜¯åˆ›å»ºç»„ä»¶ï¼Œå°†ç»„ä»¶çš„é€‰é¡¹å¯¹è±¡è½¬åŒ–ä¸ºä¸€ä¸ªç»„ä»¶æ„é€ å‡½æ•°ï¼Œå˜æˆ<code>Vue</code>æ„é€ å‡½æ•°çš„å­ç±»ã€‚æœ€åé€šè¿‡ this.options[type + &#39;s&#39;][id] = definition æŠŠå®ƒæŒ‚è½½åˆ° Vue.options.components ä¸Šã€‚</p><p><strong>æ€»ç»“</strong>ï¼šè¿™éƒ¨åˆ†éœ€è¦é€šè¿‡è°ƒè¯•æ¥ç†è§£ <code>Vue.extend</code> å‡½æ•°æ ¹æ®ä¼ å…¥çš„æ‰©å±•é€‰é¡¹åˆ›å»ºä¸€ä¸ª <code>Sub</code> æ„é€ å‡½æ•°ï¼ŒåŸå‹ç»§æ‰¿äº <code>Vue</code>ï¼Œç„¶ååˆå¹¶æ‰©å±•é€‰é¡¹å’Œ <code>Vue.options</code> ä¸º <code>Sub.options</code>ï¼Œå†å¤„ç† <code>props</code> å’Œ <code>computed</code> å±æ€§ï¼Œæ‰©å±•é™æ€æ–¹æ³•ç­‰ã€‚æ‰€ä»¥ç»„ä»¶å¯¹è±¡æ‹¥æœ‰å’Œ<code>vue</code>å®ä¾‹ä¸€æ ·çš„æˆå‘˜ã€‚æœ€åæŠŠ <code>Vue.options</code>ã€æ‰©å±•é€‰é¡¹ç­‰å¼•ç”¨ä¿å­˜åœ¨ <code>Sub</code> é™æ€å±æ€§ä¸Šï¼Œåœ¨åç»­å®ä¾‹åŒ–ç»„ä»¶æ—¶ç”¨æ¥æ£€æŸ¥æ›´æ–°é€‰é¡¹çš„æ“ä½œã€‚åœ¨å‡½æ•°çš„æœ€åè¿”å› <code>Sub</code> æ„é€ å‡½æ•°ï¼Œåœ¨ <code>Vue.component</code> ä¸­æŠŠå®ƒå­˜å…¥ <code>Vue.options.components</code> å¯¹è±¡ä¸­ä»¥å®Œæˆå…¨å±€æ³¨å†Œã€‚</p><p>å…¨å±€æ³¨å†Œçš„ç»„ä»¶ä¼šåœ¨ <code>Vue.options.components</code> ä¸­å­˜å‚¨ï¼Œä¸è¿‡åœ¨å®ä¾‹å¯¹è±¡ä¸­<code>vm.$options.components</code> ä¹Ÿå¯è·å¾—ã€‚</p><h5 id="åˆ›å»ºvnode" tabindex="-1">åˆ›å»ºvnode <a class="header-anchor" href="#åˆ›å»ºvnode" aria-label="Permalink to &quot;åˆ›å»ºvnode&quot;">â€‹</a></h5><p>åœ¨åˆ›å»º<code>vnode</code>æ—¶ï¼Œæ‰§è¡Œ<code>_createElement</code>æ–¹æ³•ï¼Œå®šä¹‰åœ¨<code>src/core/vdom/create-element.js</code>ã€‚</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> _createElement</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  context</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Component</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  tag</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Class</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Component</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Function</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Object</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  data</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> VNodeData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  children</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> any</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  normalizationType</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> number</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> VNode</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Array</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">VNode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // ...</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> vnode, ns</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">typeof</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> tag </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;string&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Ctor</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ns </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (context.$vnode </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> context.$vnode.ns) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">||</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> config.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getTagNamespace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(tag)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (config.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">isReservedTag</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(tag)) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // platform built-in elements</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      vnode </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> VNode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        config.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">parsePlatformTagName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(tag), data, children,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        undefined</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">undefined</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, context</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      )</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">isDef</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Ctor </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> resolveAsset</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(context.$options, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;components&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, tag))) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // component</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      vnode </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> createComponent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Ctor, data, context, children, tag)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // unknown or unlisted namespaced elements</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // check at runtime because it may get assigned a namespace when its</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // parent normalizes children</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      vnode </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> VNode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        tag, data, children,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        undefined</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">undefined</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, context</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      )</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // direct component options / constructor</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    vnode </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> createComponent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(tag, data, context, children)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // ...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>å…ˆæ ¡éªŒ<code>isDef(Ctor = resolveAsset(context.$options, &#39;components&#39;, tag)</code>ï¼Œé€šè¿‡<code>resolveAsset</code>æ‹¿åˆ°<code>vm.$options.components[tag]</code>ï¼Œä¹Ÿå°±æ˜¯ç»„ä»¶çš„æ„é€ å‡½æ•°ï¼Œå°†ä½œä¸º<code>createComponent</code>çš„å‚æ•°ã€‚ è¿™é‡Œè¦é¢å¤–æåˆ°çš„ä¸€ç‚¹æ˜¯ï¼Œæˆ‘ä»¬åœ¨æ³¨å†Œç»„ä»¶æ—¶å®šä¹‰ç»„ä»¶åæ—¶å¯ä»¥å†™<code>kebab-case</code>ï¼Œä¹Ÿå¯ä»¥å†™<code>PascalCase</code>ï¼Œéƒ½èƒ½å¤Ÿæ‰¾åˆ°å¯¹åº”çš„èµ„æºï¼Œè¿™æ˜¯å› ä¸º<code>resolveAsset</code>çš„å¤„ç†ï¼š</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * Resolve an asset.</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * This function is used because child instances need access</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * to assets defined in its ancestor chain.</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> resolveAsset</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  options</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Object</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  type</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  warnMissing</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> boolean</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> any</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  /* istanbul ignore if */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">typeof</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> id </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!==</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;string&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> assets</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> options[type]</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // check local registration variations first</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">hasOwn</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(assets, id)) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> assets[id]</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> camelizedId</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> camelize</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(id)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">hasOwn</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(assets, camelizedId)) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> assets[camelizedId]</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> PascalCaseId</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> capitalize</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(camelizedId)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">hasOwn</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(assets, PascalCaseId)) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> assets[PascalCaseId]</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // fallback to prototype chain</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> res</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> assets[id] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">||</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> assets[camelizedId] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">||</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> assets[PascalCaseId]</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (process.env.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">NODE_ENV</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> !==</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;production&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> warnMissing </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;&amp;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> !</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">res) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    warn</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      &#39;Failed to resolve &#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> type.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">slice</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;: &#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> id,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      options</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    )</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> res</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>ç›´æ¥ä½¿ç”¨ <code>id</code> æ‹¿<code>assets[id]</code>ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œåˆ™æŠŠ <code>id</code> å˜æˆé©¼å³°çš„å½¢å¼å†æ‹¿ï¼Œå¦‚æœä»ç„¶ä¸å­˜åœ¨åˆ™åœ¨é©¼å³°çš„åŸºç¡€ä¸ŠæŠŠé¦–å­—æ¯å†å˜æˆå¤§å†™çš„å½¢å¼å†æ‹¿ï¼Œå¦‚æœä»ç„¶æ‹¿ä¸åˆ°å°±æŠ¥é”™ã€‚</p><h2 id="å±€éƒ¨æ³¨å†Œ" tabindex="-1">å±€éƒ¨æ³¨å†Œ <a class="header-anchor" href="#å±€éƒ¨æ³¨å†Œ" aria-label="Permalink to &quot;å±€éƒ¨æ³¨å†Œ&quot;">â€‹</a></h2><h3 id="ä½¿ç”¨-1" tabindex="-1">ä½¿ç”¨ <a class="header-anchor" href="#ä½¿ç”¨-1" aria-label="Permalink to &quot;ä½¿ç”¨&quot;">â€‹</a></h3><p>åœ¨ä¸€ä¸ªç»„ä»¶å†…éƒ¨ä½¿ç”¨ <code>components</code> é€‰é¡¹åšç»„ä»¶çš„å±€éƒ¨æ³¨å†Œï¼Œä¾‹å¦‚ï¼š</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> HelloWorld </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;./components/HelloWorld&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  components: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    HelloWorld</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="æºç åˆ†æ-1" tabindex="-1">æºç åˆ†æ <a class="header-anchor" href="#æºç åˆ†æ-1" aria-label="Permalink to &quot;æºç åˆ†æ&quot;">â€‹</a></h3><p>å±€éƒ¨æ³¨å†Œçš„ç»„ä»¶çš„æ„é€ å‡½æ•°ä¹Ÿå°±æ˜¯ <code>extend</code>, æ˜¯åœ¨åˆ›å»ºå…¶å¯¹åº”çš„ <code>Vnode</code>å¯¹è±¡æ—¶åœ¨å‡½æ•° <code>createComponent</code> ä¸­æ‰åˆ›å»ºçš„ã€‚åœ¨ <code>createComponent</code> ä¸­ä¹Ÿæ˜¯é€šè¿‡è°ƒç”¨ <code>Vue.extend</code> åˆ›å»ºçš„å±€éƒ¨ç»„ä»¶çš„æ„é€ å‡½æ•°ï¼Œåœ¨<code>createComponentInstanceForVnode</code>æ‰§è¡Œ <code>_init</code>ã€‚æŠŠ <code>components</code> åˆå¹¶åˆ° <code>vm.$options.components</code> ä¸Šï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥åœ¨ <code>resolveAsset </code>çš„æ—¶å€™æ‹¿åˆ°è¿™ä¸ªç»„ä»¶çš„æ„é€ å‡½æ•°ï¼Œå¹¶ä½œä¸º <code>createComponent</code> çš„é’©å­çš„å‚æ•°ã€‚</p><p>æ³¨æ„ï¼Œå±€éƒ¨æ³¨å†Œå’Œå…¨å±€æ³¨å†Œä¸åŒçš„æ˜¯ï¼Œåªæœ‰è¯¥ç±»å‹çš„ç»„ä»¶æ‰å¯ä»¥è®¿é—®å±€éƒ¨æ³¨å†Œçš„å­ç»„ä»¶ï¼Œè€Œå…¨å±€æ³¨å†Œæ˜¯æ‰©å±•åˆ° <code>Vue.options</code> ä¸‹ï¼Œæ‰€ä»¥åœ¨æ‰€æœ‰ç»„ä»¶åˆ›å»ºçš„è¿‡ç¨‹ä¸­ï¼Œéƒ½ä¼šä»å…¨å±€çš„ <code>Vue.options.components</code>æ‰©å±•åˆ°å½“å‰ç»„ä»¶çš„ <code>vm.$options.components</code> ä¸‹ï¼Œè¿™å°±æ˜¯å…¨å±€æ³¨å†Œçš„ç»„ä»¶èƒ½è¢«ä»»æ„ä½¿ç”¨çš„åŸå› ã€‚</p><hr><p><strong>Quiz Time</strong>ğŸ‘‡</p><details><summary> å¦‚æœåˆ›å»ºç»„ä»¶çš„ Vnode å¤šæ¬¡ï¼Œé‚£ä¹ˆæ„é€ å‡½æ•°ä¹Ÿä¼šé‡å¤åˆ›å»ºå—ï¼Ÿ</summary> <br> âœ… ç­”æ¡ˆæ˜¯å¦å®šçš„ï¼Œå› ä¸ºåœ¨ Vue.extend ä¸­åˆ›å»ºå­ç±»ä¹‹åä¼šæŠŠå­ç±»æ„é€ å‡½æ•°å­˜å…¥ Vue.extend çš„å®å‚ extendOptions._Ctor ä¸­ã€‚è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆéœ€è¦ç¼“å­˜ï¼Œ </details>`,37),t=[p];function k(l,e,d,E,r,g){return i(),a("div",{"data-pagefind-body":!0},t)}const c=s(h,[["render",k]]);export{y as __pageData,c as default};
